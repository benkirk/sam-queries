{{!
    Project Card Template
    Displays a project with allocation summary and expandable resource details

    Data structure:
    {
        projcode: "SCSG0001",
        title: "Project Title",
        active: true,
        lead_username: "username",
        lead_name: "Full Name",
        total_allocated: 1000000.0,
        total_used: 456789.12,
        total_remaining: 543210.88,
        percent_used: 45.68,
        resources: [{resource_name, allocated, used, remaining, percent_used, charges_by_type, adjustments, status, start_date, end_date}]
    }
}}
<div class="card project-card">
    <div class="card-header"
         data-toggle="collapse"
         data-target="#project-{{projcode}}"
         aria-expanded="false"
         aria-controls="project-{{projcode}}">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h5 class="mb-0">
                    <i class="fas fa-folder-open text-primary"></i>
                    <strong>{{projcode}}</strong> - {{title}}
                </h5>
            </div>
            <div>
                {{#active}}
                <span class="badge badge-success">Active</span>
                {{/active}}
                {{^active}}
                <span class="badge badge-secondary">Inactive</span>
                {{/active}}
            </div>
        </div>
    </div>

    <div id="project-{{projcode}}" class="collapse">
        <div class="card-body">
            <!-- Project Summary -->
            <div class="project-stats-box">
                <h6><i class="fas fa-chart-pie"></i> Allocation Summary</h6>
                <div class="stat-item">
                    <span class="stat-label">Project Lead:</span>
                    <span class="stat-value">{{lead_name}} ({{lead_username}})</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Total Allocated:</span>
                    <span class="stat-value text-primary">{{total_allocated}}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Total Used:</span>
                    <span class="stat-value text-warning">{{total_used}}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Total Remaining:</span>
                    <span class="stat-value text-success">{{total_remaining}}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Usage:</span>
                    <span class="stat-value">{{percent_used}}%</span>
                </div>
            </div>

            <!-- Overall Progress Bar -->
            <div class="mb-3">
                <label class="font-weight-bold">Overall Usage</label>
                <div class="progress" style="height: 28px;">
                    <div class="progress-bar {{progressColor}}"
                         role="progressbar"
                         style="width: {{progressWidth}}%"
                         aria-valuenow="{{percent_used}}"
                         aria-valuemin="0"
                         aria-valuemax="100">
                        {{percent_used}}%
                    </div>
                </div>
            </div>

            <!-- Resources Table -->
            {{#resources}}
            {{#resources.length}}
            <div class="mt-3">
                <h6 class="mb-2"><i class="fas fa-server"></i> Resources:</h6>
                <div class="table-responsive">
                    <table class="table table-sm table-bordered table-hover">
                        <thead class="thead-light">
                            <tr>
                                <th>Resource</th>
                                <th>Status</th>
                                <th>Start Date</th>
                                <th>End Date</th>
                                <th>Allocated</th>
                                <th>Used</th>
                                <th>Remaining</th>
                                <th style="width: 200px;">Usage</th>
                            </tr>
                        </thead>
                        <tbody>
                            {{#resources}}
                            {{>resource-row}}
                            {{/resources}}
                        </tbody>
                    </table>
                </div>
            </div>
            {{/resources.length}}
            {{^resources.length}}
            <div class="alert alert-info">
                <i class="fas fa-info-circle"></i> No resource allocations found for this project.
            </div>
            {{/resources.length}}
            {{/resources}}
        </div>
    </div>
</div>
