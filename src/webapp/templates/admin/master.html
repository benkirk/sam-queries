{% extends 'admin/base.html' %}

{% block access_control %}
<div class="navbar-text">
    {% if current_user.is_authenticated %}
    <div class="btn-group">
        <button type="button" class="btn btn-sm btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="glyphicon glyphicon-user"></i>
            <strong>{{ current_user.username }}</strong>
            {% if current_user.roles %}
                <small class="text-muted">({{ current_user.roles|list|join(', ') }})</small>
            {% endif %}
            <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdown-menu-right">
            <li class="dropdown-header">Logged in as {{ current_user.username }}</li>
            <li role="separator" class="divider"></li>
            <li>
                <a href="{{ url_for('auth.profile') }}">
                    <i class="glyphicon glyphicon-user"></i> My Profile
                </a>
            </li>
            <li role="separator" class="divider"></li>
            <li>
                <a href="{{ url_for('auth.logout') }}" class="logout-link">
                    <i class="glyphicon glyphicon-log-out"></i> Switch User / Logout
                </a>
            </li>
        </ul>
    </div>
    {% endif %}
</div>
{% endblock %}
